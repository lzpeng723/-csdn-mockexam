(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b0ed112"],{"01ea":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return l}));var i=["TINYINT","INT","BIGINT","DATE","DATETIME","CHAR","VARCHAR","TEXT","LONGTEXT"],n=["DATE","DATETIME","TEXT","LONGTEXT"],l=[{type:"text",label:"单行文本(text)"},{type:"radio",label:"单选(radio)"},{type:"checkbox",label:"多选(checkbox)"},{type:"select",label:"下拉框(select))"},{type:"date",label:"日期(date)"},{type:"datetime",label:"日期和时间(datetime)"},{type:"email",label:"邮箱(email)"},{type:"textarea",label:"多行文本(textarea)"},{type:"number",label:"数字(number)"},{type:"password",label:"密码(password)"},{type:"selectmultiple",label:"多行下拉框(select_multiple)"}],o=["radio","checkbox","select","selectmultiple"]},"25f0":function(e,t,r){"use strict";var i=r("6eeb"),n=r("825a"),l=r("d039"),o=r("ad6d"),a="toString",u=RegExp.prototype,c=u[a],s=l((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=a;(s||d)&&i(RegExp.prototype,a,(function(){var e=n(this),t=String(e.source),r=e.flags,i=String(void 0===r&&e instanceof RegExp&&!("flags"in u)?o.call(e):r);return"/"+t+"/"+i}),{unsafe:!0})},"371d":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wrap"},[r("div",{staticClass:"form"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[e._l(e.fieldList,(function(t){return r("el-form-item",{key:t.guid,attrs:{label:t.field_name,prop:t.field}},["select"===t.input_type||"selectmultiple"===t.input_type?r("el-select",{attrs:{multiple:"selectmultiple"===t.input_type,clearable:"",placeholder:t.placeholder},model:{value:e.ruleForm[t.field],callback:function(r){e.$set(e.ruleForm,t.field,r)},expression:"ruleForm[item.field]"}},e._l(t.option.split("##"),(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1):e._e(),"radio"===t.input_type?r("el-radio-group",{model:{value:e.ruleForm[t.field],callback:function(r){e.$set(e.ruleForm,t.field,r)},expression:"ruleForm[item.field]"}},e._l(t.option.split("##"),(function(i,n){return r("el-radio",{key:n,attrs:{label:i,name:e.ruleForm[t.field]}})})),1):e._e(),"checkbox"===t.input_type?r("el-checkbox-group",{model:{value:e.ruleForm[t.field],callback:function(r){e.$set(e.ruleForm,t.field,r)},expression:"ruleForm[item.field]"}},e._l(t.option.split("##"),(function(e,i){return r("el-checkbox",{key:i,attrs:{label:e,name:t.field}})})),1):e._e(),e.needOption.includes(t.input_type)?e._e():r("el-input",{attrs:{type:t.input_type||"text",placeholder:t.placeholder},model:{value:e.ruleForm[t.field],callback:function(r){e.$set(e.ruleForm,t.field,r)},expression:"ruleForm[item.field]"}})],1)})),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)])},n=[],l=r("5530"),o=(r("d3b7"),r("25f0"),r("159b"),r("caad"),r("2532"),r("c7ea")),a=r("01ea"),u={data:function(){return{needOption:a["b"],rules:{},loading:!1,btnLoading:!1,ruleForm:{},fieldList:[],mode_guid:""}},created:function(){this.mode_guid=this.$route.query.id,this.init()},methods:{submitForm:function(e){var t=this;this.btnLoading=!0,this.loading=!0,this.$refs[e].validate((function(r){if(!r)return t.btnLoading=!1,t.loading=!1,console.log("error submit!!"),!1;Object(o["d"])({mode_guid:t.mode_guid,form:Object(l["a"])({},t.changeObjString(t.ruleForm))}).then((function(r){t.$message({type:"success",message:"提交成功"}),t.resetForm(e)})).catch().finally((function(){t.btnLoading=!1,t.loading=!1}))}))},changeObjString:function(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var r=e[t];"[object Array]"===Object.prototype.toString.call(r)&&(e[t]=e[t].toString())}return e},resetForm:function(e){this.$refs[e].resetFields()},init:function(){var e=this;this.loading=!0,Object(o["c"])({mode_guid:this.mode_guid}).then((function(t){var r=t||[];if(!r.length)return e.$message.error("该模型没有表单字段，请录入字段后再尝试"),void e.$router.go(-1);r.forEach((function(t){"checkbox"!==t.input_type&&"selectmultiple"!==t.input_type||e.$set(e.ruleForm,t.field,[]),e.rules[t.field]=[],1===t.required&&e.rules[t.field].push({required:!0,message:"字段为必填",trigger:"blur"}),t.field_length&&!a["b"].includes(t.input_type)&&e.rules[t.field].push({max:t.field_length,message:"长度最大为 ".concat(t.field_length,"个字符"),trigger:"blur"})})),e.$nextTick((function(){e.loading=!1,e.fieldList=r}))}))}}},c=u,s=(r("f618"),r("2877")),d=Object(s["a"])(c,i,n,!1,null,"3429fbc0",null);t["default"]=d.exports},"65bf":function(e,t,r){},ad6d:function(e,t,r){"use strict";var i=r("825a");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b775:function(e,t,r){"use strict";r("d3b7");var i=r("bc3a"),n=r.n(i),l=r("5c96"),o=n.a.create({baseURL:"http://localhost:8080",timeout:5e3});o.interceptors.response.use((function(e){var t=e.data;return 200!==t.code?(Object(l["Message"])({message:t.data||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.data||"Error"))):t.data}),(function(e){return console.log("err"+e),Object(l["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=o},c7ea:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var i=r("b775");function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/form/get",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/form/push",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/form/header",method:"post",data:e})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])({url:"/form/table",method:"post",data:e})}},f618:function(e,t,r){"use strict";r("65bf")}}]);